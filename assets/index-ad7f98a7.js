(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerpolicy&&(o.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?o.credentials="include":t.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const l=document.querySelector("form.form"),c=l.querySelector(".dropdown__button"),v=c.textContent,m=l.querySelector("#username"),u=l.querySelector("#email"),f=l.querySelector("#textarea"),_=Array.from(document.querySelectorAll(".feedback__star")),y=Array.from(document.querySelectorAll(".dropdown")),w=document.querySelector(".stats"),L=document.querySelector(".stats__remove");let p=0;y.forEach(function(s){const e=s.querySelector(".dropdown__button"),r=s.querySelector(".dropdown__list"),n=r.querySelectorAll(".dropdown__list-item"),t=s.querySelector(".dropdown__input-hidden");e.addEventListener("click",function(o){o.preventDefault(),e.classList.toggle("dropdown__button--active"),r.classList.toggle("dropdown__list--visible")}),n.forEach(function(o){o.addEventListener("click",function(a){a.stopPropagation(),e.innerText=this.innerText,e.focus(),t.value=this.dataset.value,e.classList.remove("dropdown__button--active"),r.classList.remove("dropdown__list--visible")})}),document.addEventListener("click",function(o){o.target!==e&&(e.classList.remove("dropdown__button--active"),r.classList.remove("dropdown__list--visible"))}),document.addEventListener("keydown",function(o){(o.key==="Tab"||o.key==="Escape")&&(e.classList.remove("dropdown__button--active"),r.classList.remove("dropdown__list--visible"))})});_.forEach(s=>{s.addEventListener("click",()=>{const{itemValue:e}=s.dataset;s.parentNode.dataset.totalValue=e,p=e})});const h=s=>/^(([^<>()[\]\\.,;:\s@']+(\.[^<>()[\]\\.,;:\s@']+)*)|('.+'))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(s).toLowerCase()),i=(s,e)=>{const r=s.parentElement.parentElement,n=r.querySelector(".form__error");n.textContent=e,r.classList.add("error"),r.classList.remove("succes"),r.classList.remove("shake-horizontal"),r.offsetWidth,r.classList.add("shake-horizontal")},d=s=>{const e=s.parentElement.parentElement,r=e.querySelector(".form__error");r.textContent="",e.classList.remove("error"),e.classList.add("success"),e.classList.remove("shake-horizontal")},g=()=>{const s=m.value.trim(),e=u.value.trim(),r=f.value.trim(),n=c.textContent;let t=!1;if(n==v)i(c,"Выберите книгу");else{d(c);const a=c.parentElement.parentElement.querySelector("input");a.value=n}return s==""?i(m,"Заполните имя"):d(m),r==""?i(f,"Заполните имя"):d(f),e===""?i(u,"Заполните email"):h(e)?d(u):i(u,"Введите валидный email"),Array.from(l.querySelectorAll(".form__group.error")).length==0?t=!0:t=!1,t};l.addEventListener("submit",s=>{if(s.preventDefault(),g()){const e=[];l.querySelectorAll(".to-stats").forEach(r=>{const{name:n,value:t}=r;e.push({name:n,value:t})}),e.push({name:"userRating",value:p}),w.classList.remove("stats__disable"),console.table(e),l.reset()}else return!1});L.addEventListener("click",function(){this.parentElement.classList.add("stats__disable")});new Swiper(".swiper",{direction:"horizontal",pagination:{el:".swiper-pagination",clickable:!0},slidesPerView:1,loop:!1,breakpoints:{320:{slidesPerView:1,spaceBetween:20},767:{slidesPerView:3,spaceBetween:30}}});
